var System=function(t){this.name=t,this.clusters=[]};System.prototype.getAvailability=function(){var t=1;return this.clusters.forEach(function(e,n,o){t*=e.getAvailability()}),t};var Cluster=function(t,e,n){this.id=t,this.code=e,this.name=n,this.components=[]};Cluster.prototype.addComponent=function(t){this.components.push(t)},Cluster.prototype.removeComponent=function(t){var e=this.components.indexOf(t);this.components.splice(e,1)},Cluster.prototype.getAvailability=function(){var t=0;return this.components.forEach(function(e,n,o){t=1-(1-t)*(1-e.getAvailability())}),t};var Component=function(t,e,n,o){this.id=t,this.name=e,this.mttr=n,this.mtbf=o};Component.prototype.getAvailability=function(){var t=this.mtbf/(this.mttr+this.mtbf);return t},Component.prototype.getDowntime=function(){return 0};var app=angular.module("main",["ngResource"]);app.controller("RamsController",["$scope",function(t){var e=this;e.system=new System("Thailand Modernized CNS/ATM System"),e.system.clusters.push(new Cluster(1,"S","Sensor Nodes")),e.system.clusters.push(new Cluster(2,"C","Communication Nodes")),e.system.clusters.push(new Cluster(3,"P","Processing Nodes")),e.system.clusters.push(new Cluster(4,"D","Display Nodes")),e.addComponent=function(t,e){var n=0;if(0==e.components.length)n=1;else{var o=Math.max.apply(null,e.components.map(function(t){return t.id}));n=o+1}var s=new Component(n,t.name,t.mttr,t.mtbf);e.addComponent(s),t.id=null,t.name="",t.mttr=null,t.mtbf=null},e.removeComponent=function(t,e){e.removeComponent(t)},e.printSysDowntime=function(t){var e=8760*(1-t);return e>=24?(e/=24,e.toFixed(2)+" day(s) per year"):1>e?(e=60*e,1>e?(e=60*e,1>e?(e=1e3*e,e.toFixed(2)+" milli-seconds per year"):e.toFixed(2)+" seconds per year"):e.toFixed(2)+" minutes per year"):e.toFixed(2)+" hours per year"},t.$watch("self.system.clusters",function(t,e){console.log("Changed")}),e.developerName="Paveen JUNTAMA : paveenju@aerothai.co.th"}]);